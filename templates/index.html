<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin AI Predictor</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Our CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fab fa-bitcoin"></i> Bitcoin AI Predictor</h1>
            <p>AI-powered prediction for tomorrow's Bitcoin price movement using Wikipedia sentiment analysis</p>
            <div class="status-indicators">
                <div class="status-item">
                    <span class="status-dot live"></span>
                    Live Data
                </div>
                <div class="status-item">
                    <span class="status-dot model"></span>
                    Model Ready
                </div>
                <div class="status-item">
                    <span class="status-dot api"></span>
                    API Connected
                </div>
            </div>
        </div>
        
        <div class="content">
            <!-- Tabs Navigation -->
            <div class="tabs">
                <div class="tab active" onclick="switchTab('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </div>
                <div class="tab" onclick="switchTab('analytics')">
                    <i class="fas fa-chart-bar"></i> Analytics
                </div>
                <div class="tab" onclick="switchTab('history')">
                    <i class="fas fa-history"></i> Prediction History
                </div>
            </div>
            
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <!-- Prediction Section -->
                    <div class="prediction-section">
                        <h2 class="chart-title"><i class="fas fa-crystal-ball"></i> Live Prediction</h2>
                        
                        <div class="prediction-card" id="predictionCard">
                            <div class="prediction-text" id="predictionText">
                                <i class="fas fa-sync-alt"></i> Click "Get Prediction"
                            </div>
                            
                            <div class="confidence-meter">
                                <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
                            </div>
                            
                            <div class="confidence-text">
                                <span id="confidenceText">Confidence Level</span>
                                <span id="confidenceValue">0%</span>
                            </div>
                            
                            <div class="price" id="priceText">
                                $--
                            </div>
                            <div id="priceChange" class="price-change"></div>
                            
                            <div id="predictionDate" style="margin-top: 10px; color: #6c757d;"></div>
                        </div>

                        <!-- Prediction Explanation -->
                        <div class="prediction-explanation">
                            <h4><i class="fas fa-info-circle"></i> How to Interpret</h4>
                            <ul>
                                <li><strong>UP Prediction</strong>: Model expects price increase tomorrow</li>
                                <li><strong>DOWN Prediction</strong>: Model expects price decrease tomorrow</li>
                                <li><strong>Confidence</strong>: Model's certainty in prediction (70%+ is high)</li>
                                <li><strong>Current Price</strong>: Bitcoin price at prediction time</li>
                            </ul>
                        </div>

                        <!-- Confidence Guide -->
                        <div class="confidence-guide">
                            <h4><i class="fas fa-chart-line"></i> Confidence Levels</h4>
                            <div class="confidence-levels">
                                <div class="level-item">
                                    <span class="level-dot high"></span>
                                    <strong>High (70-100%)</strong>: Strong signal
                                </div>
                                <div class="level-item">
                                    <span class="level-dot medium"></span>
                                    <strong>Medium (50-70%)</strong>: Moderate confidence
                                </div>
                                <div class="level-item">
                                    <span class="level-dot low"></span>
                                    <strong>Low (0-50%)</strong>: Weak signal - use caution
                                </div>
                            </div>
                        </div>
                        
                        <div class="button-group">
                            <button class="button" onclick="getPrediction()" id="predictBtn">
                                <i class="fas fa-crystal-ball"></i> Get Prediction
                            </button>
                            <button class="button button-secondary" onclick="updateData()" id="updateBtn">
                                <i class="fas fa-sync-alt"></i> Update Data
                            </button>
                        </div>

                        <!-- Data Freshness Indicator -->
                        <div class="data-freshness" id="dataFreshness">
                            <span class="fresh">ðŸŸ¢ Data Updated Recently</span>
                        </div>
                    </div>
                    
                    <!-- Stats Section -->
                    <div class="prediction-section">
                        <h2 class="chart-title"><i class="fas fa-chart-pie"></i> Model Performance</h2>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">Accuracy</div>
                                <div class="stat-value" id="accuracyStat">--%</div>
                                <div class="stat-label">Last 30 Days</div>
                            </div>
                            
                            <div class="stat-card up">
                                <div class="stat-label">Correct UP</div>
                                <div class="stat-value" id="upAccuracy">--%</div>
                                <div class="stat-label">Predictions</div>
                            </div>
                            
                            <div class="stat-card down">
                                <div class="stat-label">Correct DOWN</div>
                                <div class="stat-value" id="downAccuracy">--%</div>
                                <div class="stat-label">Predictions</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-label">Avg Confidence</div>
                                <div class="stat-value" id="avgConfidence">--%</div>
                                <div class="stat-label">Recent Predictions</div>
                            </div>
                        </div>

                        <!-- Performance Context -->
                        <div class="performance-context">
                            <p><small>
                                <i class="fas fa-lightbulb"></i> 
                                <strong>Industry Context</strong>: 55-65% accuracy is considered good for financial prediction models. 
                                Our model aims to beat this benchmark through Wikipedia sentiment analysis.
                            </small></p>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Price Chart -->
                <div class="chart-container">
                    <h2 class="chart-title"><i class="fab fa-bitcoin"></i> Bitcoin Price History</h2>
                    <canvas id="priceChart"></canvas>
                </div>
                
                <!-- Sentiment Chart -->
                <div class="chart-container">
                    <h2 class="chart-title"><i class="fas fa-smile"></i> Wikipedia Sentiment Analysis</h2>
                    <canvas id="sentimentChart"></canvas>
                </div>
            </div>
            
            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="dashboard-grid">
                    <div class="chart-container">
                        <h2 class="chart-title"><i class="fas fa-project-diagram"></i> Feature Importance</h2>
                        <canvas id="featureChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h2 class="chart-title"><i class="fas fa-brain"></i> Model Confidence Distribution</h2>
                        <canvas id="confidenceChart"></canvas>
                    </div>
                </div>

                <!-- Feature Explanations -->
                <div class="feature-explanations">
                    <h3><i class="fas fa-cogs"></i> Feature Descriptions</h3>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <strong>Close Ratios</strong>: Price compared to moving averages
                        </div>
                        <div class="feature-item">
                            <strong>Trend Indicators</strong>: Recent price direction momentum
                        </div>
                        <div class="feature-item">
                            <strong>Edit Counts</strong>: Wikipedia activity volume
                        </div>
                        <div class="feature-item">
                            <strong>Sentiment Scores</strong>: Emotional tone of Wikipedia edits
                        </div>
                    </div>
                </div>
                
                <div class="info-grid">
                    <div class="info-item">
                        <h3><i class="fas fa-lightbulb"></i> How It Works</h3>
                        <p>Our AI analyzes Wikipedia Bitcoin page edits for sentiment patterns and combines them with technical indicators to predict price movements.</p>
                        <ul style="margin-top: 15px; padding-left: 20px;">
                            <li>Real-time Wikipedia edit analysis</li>
                            <li>15+ technical indicators</li>
                            <li>XGBoost machine learning model</li>
                            <li>Daily model retraining</li>
                        </ul>
                    </div>
                    
                    <div class="info-item">
                        <h3><i class="fas fa-rocket"></i> Model Details</h3>
                        <p><strong>Algorithm:</strong> XGBoost Classifier</p>
                        <p><strong>Features:</strong> 15 technical & sentiment indicators</p>
                        <p><strong>Training Data:</strong> Historical Bitcoin prices + Wikipedia sentiment</p>
                        <p><strong>Update Frequency:</strong> Daily automatic retraining</p>
                        <p><strong>Prediction Target:</strong> Next-day price direction (UP/DOWN)</p>
                    </div>
                </div>
            </div>
            
            <!-- History Tab -->
            <div id="history" class="tab-content">
                <div class="chart-container">
                    <h2 class="chart-title"><i class="fas fa-history"></i> Recent Predictions</h2>
                    <div class="history-list" id="historyList">
                        <!-- History items will be added here dynamically -->
                    </div>
                </div>
                
                <div class="info-grid">
                    <div class="info-item">
                        <h3><i class="fas fa-trophy"></i> Performance Summary</h3>
                        <div id="performanceSummary">
                            <p>Loading performance data...</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <h3><i class="fas fa-calendar-alt"></i> Prediction Calendar</h3>
                        <div id="predictionCalendar">
                            <p>Last 7 days of predictions:</p>
                            <div class="calendar-grid" id="calendarGrid">
                                <!-- Calendar items will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Loading Indicator -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p id="loadingText">Analyzing data...</p>
                <p id="loadingSubtext" style="margin-top: 10px; font-size: 0.9em; color: #6c757d;"></p>
            </div>
            
            <!-- Status Section -->
            <div class="status">
                <strong><i class="fas fa-server"></i> System Status:</strong>
                <div id="statusInfo">Checking...</div>
            </div>
            
            <!-- Disclaimer -->
            <div class="disclaimer">
                <strong><i class="fas fa-exclamation-triangle"></i> Disclaimer:</strong> 
                This is for educational purposes only. Cryptocurrency investments carry high risk. Always do your own research and consult with a qualified financial advisor before making investment decisions.
            </div>
        </div>
    </div>

    <!-- Our JavaScript -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>